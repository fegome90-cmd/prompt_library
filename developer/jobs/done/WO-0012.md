# WO-0012: Spike: Setup de framework de tests m铆nimo

## Metadatos
| Campo | Valor |
|-------|-------|
| id | WO-0012 |
| title | Spike: Setup de framework de tests m铆nimo |
| type | spike |
| priority | P3 |
| area | INFRA |
| status |  Pending |

## Rationale
Hallazgo TEST: No hay framework de tests. Los WOs necesitan tests verificables. Se requiere infraestructura m铆nima.

## Scope

### Include
- `vitest.config.ts` (crear)
- `package.json` (agregar scripts de test)
- `src/__tests__/setup.test.ts` (crear ejemplo)

### Exclude
- No escribir tests completos, solo infraestructura
- No modificar c贸digo de producci贸n

## Dependencies
Ninguna

## Acceptance Criteria
- [ ] `bun test` ejecuta sin errores
- [ ] Archivo de configuraci贸n de Vitest existe
- [ ] Test de ejemplo pasa (puede ser 1+1=2)

## Definition of Done

### Tests
- [ ] `bun test` muestra 1 passing

### Security
- N/A

### Observability
- [ ] Output de test incluye tiempo de ejecuci贸n

### Docs
- [ ] README explicando c贸mo correr tests

### Evidence
- [ ] Output de `bun test`
- [ ] Archivos creados

## Verify

### Commands
```bash
# Instalar dependencias
bun add -d vitest @testing-library/react jsdom

# Correr tests
bun test

# Correr con coverage
bun test:coverage
```

### Expected
- Tests pasan
- Coverage report generado

## Risk

### Failure Modes
- Configuraci贸n incompatible con Next.js
- Tests muy lentos

### Rollback
```bash
# Eliminar archivos de test
rm vitest.config.ts
rm -rf src/__tests__

# Revertir package.json
git checkout package.json
```

## Notes
- Vitest es compatible con Next.js y r谩pido
- Instalar: `bun add -d vitest @testing-library/react jsdom`

## Implementaci贸n Sugerida

```typescript
// vitest.config.ts
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  test: {
    environment: 'jsdom',
    include: ['src/**/*.test.{ts,tsx}', 'src/__tests__/**/*.{ts,tsx}'],
    coverage: {
      reporter: ['text', 'json', 'html'],
    },
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
});
```

```typescript
// src/__tests__/setup.test.ts
import { describe, it, expect } from 'vitest';

describe('Setup', () => {
  it('should run basic test', () => {
    expect(1 + 1).toBe(2);
  });

  it('should have environment configured', () => {
    expect(process.env.NODE_ENV).toBeDefined();
  });
});
```

```json
// package.json - agregar scripts
{
  "scripts": {
    "test": "vitest",
    "test:run": "vitest run",
    "test:coverage": "vitest run --coverage"
  }
}
```

## Log de Cambios
| Fecha | Estado | Notas |
|-------|--------|-------|
| - |  Pending | Creado |
