# WO-0004: Spike: Dise帽ar estrategia de autenticaci贸n m铆nima

## Metadatos
| Campo | Valor |
|-------|-------|
| id | WO-0004 |
| title | Spike: Dise帽ar estrategia de autenticaci贸n m铆nima |
| type | spike |
| priority | P1 |
| area | FULLSTACK |
| status |  Pending |

## Rationale
Hallazgo HIGH: Sin autenticaci贸n real. Cualquiera puede crear/editar prompts. Se necesita dise帽o antes de implementar.

## Scope

### Include
- `docs/auth-design.md` (crear)

### Exclude
- No escribir c贸digo de auth en este WO
- No modificar endpoints existentes

## Dependencies
Ninguna

## Acceptance Criteria
- [ ] Documento define: flujo de auth, almacenamiento de sesi贸n, middleware de protecci贸n
- [ ] Documento lista endpoints que requieren auth vs p煤blicos
- [ ] Documento estima esfuerzo de implementaci贸n

## Definition of Done

### Tests
- N/A - spike de investigaci贸n

### Security
- [ ] Documento considera OWASP para sesiones

### Observability
- N/A

### Docs
- [ ] `docs/auth-design.md` creado con secciones: Overview, Flujo, Endpoints, Estimaci贸n

### Evidence
- [ ] Link al documento markdown
- [ ] Contenido del documento

## Verify

### Commands
```bash
cat docs/auth-design.md
```

### Expected
- Documento existe con todas las secciones requeridas

## Risk

### Failure Modes
- Dise帽o muy complejo que retrasa implementaci贸n
- Dise帽o que no considera edge cases

### Rollback
```bash
rm docs/auth-design.md
```

## Notes
Opciones a evaluar:
1. **NextAuth.js** - Soluci贸n completa, OAuth providers, session management
2. **JWT simple** - Stateless, m铆nimo overhead
3. **API Keys** - Para uso interno/empresarial
4. **Session cookies** - Simple pero requiere state en servidor

Considerar que el sistema actual usa un usuario default hardcodeado.

## Template de Documento

```markdown
# Dise帽o de Autenticaci贸n - Prompt Manager

## Overview
[Descripci贸n del problema y soluci贸n propuesta]

## Flujo de Autenticaci贸n
[Diagrama o pasos del flujo]

## Almacenamiento de Sesi贸n
[C贸mo se guarda la sesi贸n: JWT, cookies, DB]

## Middleware de Protecci贸n
[Qu茅 rutas est谩n protegidas y c贸mo]

## Endpoints Protegidos vs P煤blicos
| Endpoint | Protegido | Roles |
|----------|-----------|-------|
| GET /api/prompts | No | - |
| POST /api/prompts | S铆 | user, editor |
| PUT /api/prompts/[id] | S铆 | owner, editor |
| DELETE /api/prompts/[id] | S铆 | owner |
| ... | ... | ... |

## Estimaci贸n de Esfuerzo
[Horas/d铆as estimados]

## Decisiones
[Trade-offs y decisiones tomadas]
```

## Log de Cambios
| Fecha | Estado | Notas |
|-------|--------|-------|
| - |  Pending | Creado |
